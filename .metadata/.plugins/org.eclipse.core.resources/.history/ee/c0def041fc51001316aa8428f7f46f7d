package controllers;

import play.*;
import play.mvc.*;

import java.util.*;

import Model.User;

import models.*;

public class Application extends Controller {

    public static void index() {
        render();
    }
    // checking if email and password are OK
    public static void authenticate(String email, String password) {
        User user = User.findByEmail(email);
       if (user == null || !user.checkPassword(password)) {
        	System.out.println("not successfully");
            flash.error("Bad email or bad password");
            flash.put("email", email);
            // redirect somewhere
        } 
        connect(user);
        flash.success("Welcome %s !", user.name);
        //redirect somewhere
    }
      // creating a session 
      static void connect(User user) {
        session.put("logged", user.id);
    }
      // get the user which is logged ON
      static User connectedUser() {
	        String userId = session.get("logged");
	        return userId == null ? null : (User) User.findById(Long.parseLong(userId));
	    }
      public static void login() {
	        render();
	    }

}